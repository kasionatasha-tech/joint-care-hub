-- Insert comprehensive blog content into blog_posts table
INSERT INTO public.blog_posts (title, content, image_url) VALUES 
(
  'Understanding Knee Pain: Causes and Treatment Options',
  'Knee pain is one of the most common joint complaints affecting millions of people worldwide. Whether you''re an athlete, weekend warrior, or simply dealing with the effects of aging, understanding the causes and treatment options for knee pain is crucial for maintaining an active lifestyle.

Common Causes of Knee Pain:
- Osteoarthritis: The most common form of arthritis affecting the knee joint
- Meniscus tears: Often caused by sudden twisting movements
- Ligament injuries: Including ACL, PCL, MCL, and LCL tears
- Patellofemoral pain syndrome: Also known as runner''s knee
- Bursitis: Inflammation of the fluid-filled sacs around the knee

Treatment Approaches:
1. Conservative Management:
   - Rest and activity modification
   - Physical therapy and strengthening exercises
   - Anti-inflammatory medications
   - Ice and heat therapy
   - Bracing and support

2. Advanced Treatments:
   - Corticosteroid injections
   - Hyaluronic acid injections
   - Platelet-rich plasma (PRP) therapy
   - Arthroscopic surgery
   - Joint replacement in severe cases

Prevention is always better than treatment. Maintaining a healthy weight, staying active with low-impact exercises, and properly warming up before activities can significantly reduce your risk of knee problems.',
  '/lovable-uploads/6978bb6d-593a-4a72-8c73-17f68ebfa2a6.png'
),
(
  'Hip Arthritis: Managing Pain and Maintaining Mobility',
  'Hip arthritis affects millions of adults, particularly those over 50. The hip joint is a ball-and-socket joint that bears significant weight and stress throughout daily activities. When arthritis develops, it can severely impact quality of life and mobility.

Types of Hip Arthritis:
- Osteoarthritis: Wear-and-tear arthritis, most common type
- Rheumatoid arthritis: Autoimmune condition affecting joint lining
- Post-traumatic arthritis: Develops after hip injuries
- Avascular necrosis: Death of bone tissue due to poor blood supply

Symptoms to Watch For:
- Deep, aching pain in the groin or outer thigh
- Stiffness, especially in the morning
- Reduced range of motion
- Difficulty with activities like putting on shoes
- Limping or altered gait

Treatment Options:
1. Non-surgical approaches:
   - Weight management
   - Physical therapy
   - Low-impact exercises (swimming, cycling)
   - Anti-inflammatory medications
   - Walking aids when necessary

2. Surgical interventions:
   - Hip arthroscopy for early-stage arthritis
   - Hip resurfacing for younger patients
   - Total hip replacement for advanced cases

The key to managing hip arthritis is early intervention and a comprehensive treatment plan tailored to your specific needs and lifestyle goals.',
  '/assets/hero-image.jpg'
),
(
  'Shoulder Impingement: Causes, Symptoms, and Recovery',
  'Shoulder impingement syndrome is one of the most common shoulder problems, particularly affecting overhead athletes and individuals with repetitive shoulder use. Understanding this condition is essential for proper treatment and prevention of chronic shoulder pain.

What is Shoulder Impingement?
Shoulder impingement occurs when the tendons of the rotator cuff muscles become irritated and inflamed as they pass through the subacromial space. This narrow space can become even tighter due to bone spurs, inflammation, or poor shoulder mechanics.

Common Causes:
- Repetitive overhead activities (swimming, tennis, painting)
- Poor posture leading to altered shoulder mechanics
- Muscle imbalances between chest and back muscles
- Age-related changes and bone spur formation
- Previous shoulder injuries

Symptoms:
- Pain when lifting the arm overhead
- Night pain, especially when lying on the affected side
- Weakness in shoulder movements
- Catching or clicking sensations
- Pain radiating down the arm

Treatment Protocol:
1. Initial management:
   - Rest from aggravating activities
   - Ice therapy for acute pain
   - Anti-inflammatory medications
   - Gentle range of motion exercises

2. Progressive rehabilitation:
   - Strengthen rotator cuff muscles
   - Improve shoulder blade stability
   - Address posture and movement patterns
   - Gradual return to activities

Most cases of shoulder impingement respond well to conservative treatment when caught early. Surgery is rarely needed unless conservative measures fail after 3-6 months.',
  '/assets/hero-image.jpg'
),
(
  'Back Pain Prevention: Building a Strong Foundation',
  'Back pain is the leading cause of disability worldwide, affecting up to 80% of adults at some point in their lives. While back pain can be complex, many cases are preventable with proper education, exercise, and lifestyle modifications.

Understanding Your Spine:
The spine consists of 24 vertebrae, intervertebral discs, ligaments, and muscles working together to provide stability and mobility. When any component is compromised, it can lead to pain and dysfunction.

Common Causes of Back Pain:
- Muscle strains and ligament sprains
- Herniated or bulging discs
- Degenerative disc disease
- Spinal stenosis
- Poor posture and ergonomics
- Sedentary lifestyle

Prevention Strategies:
1. Exercise regularly:
   - Strengthen core muscles
   - Maintain flexibility
   - Include cardiovascular fitness
   - Focus on functional movements

2. Practice good posture:
   - Set up an ergonomic workspace
   - Use proper lifting techniques
   - Sleep in supportive positions
   - Take frequent breaks from sitting

3. Lifestyle modifications:
   - Maintain a healthy weight
   - Quit smoking (reduces disc nutrition)
   - Manage stress effectively
   - Stay hydrated

When to Seek Help:
- Pain persists more than a few days
- Severe pain following injury
- Numbness or tingling in legs
- Weakness in leg muscles
- Loss of bladder or bowel control

Remember, most episodes of back pain resolve with conservative treatment. The key is developing healthy habits that support your spine throughout your lifetime.',
  '/assets/hero-image.jpg'
),
(
  'Tennis Elbow: Beyond the Tennis Court',
  'Despite its name, tennis elbow (lateral epicondylitis) affects far more non-tennis players than tennis players. This common condition involves inflammation of the tendons that attach to the lateral epicondyle, causing pain and weakness in the forearm and wrist.

Who Gets Tennis Elbow?
- Office workers using computers extensively
- Carpenters, plumbers, and painters
- Cooks and food service workers
- Musicians and artists
- People aged 30-50 are most commonly affected

Causes and Risk Factors:
- Repetitive gripping and twisting motions
- Poor technique in sports or work activities
- Inadequate warm-up before activities
- Using tools that are too heavy or poorly fitted
- Previous elbow injuries

Symptoms:
- Pain on the outside of the elbow
- Weak grip strength
- Pain when lifting or bending the arm
- Difficulty with simple tasks like turning doorknobs
- Stiffness in the elbow, especially in the morning

Treatment Approach:
1. Immediate care:
   - Rest from aggravating activities
   - Ice therapy for pain relief
   - Anti-inflammatory medications
   - Counterforce bracing

2. Rehabilitation phase:
   - Gentle stretching exercises
   - Progressive strengthening
   - Technique modification
   - Ergonomic improvements

3. Advanced treatments (if needed):
   - Corticosteroid injections
   - Platelet-rich plasma therapy
   - Shock wave therapy
   - Surgery in severe, resistant cases

Recovery typically takes 6-12 months with proper treatment. The key is patience and consistency with the rehabilitation program while avoiding re-injury.',
  '/assets/hero-image.jpg'
),
(
  'Ankle Sprains: More Than Just a Twist',
  'Ankle sprains are among the most common musculoskeletal injuries, accounting for up to 25% of all sports-related injuries. While often dismissed as minor injuries, ankle sprains can have long-lasting effects if not properly treated and rehabilitated.

Anatomy of an Ankle Sprain:
The ankle joint is stabilized by three groups of ligaments. Most sprains (85%) involve the lateral ligaments on the outside of the ankle, typically occurring when the foot rolls inward.

Grades of Ankle Sprains:
- Grade I: Mild stretching of ligaments with minimal pain and swelling
- Grade II: Partial tearing with moderate pain, swelling, and some instability
- Grade III: Complete ligament tear with severe pain, swelling, and instability

Immediate Treatment (RICE Protocol):
- Rest: Avoid weight-bearing activities
- Ice: Apply for 15-20 minutes every 2-3 hours
- Compression: Use elastic bandage to control swelling
- Elevation: Keep ankle raised above heart level when possible

Rehabilitation Phases:
1. Acute phase (0-72 hours):
   - Control pain and swelling
   - Protect from further injury
   - Gentle range of motion when tolerated

2. Subacute phase (3 days-6 weeks):
   - Restore full range of motion
   - Begin strengthening exercises
   - Progress weight-bearing activities
   - Address balance and proprioception

3. Return to activity phase (6+ weeks):
   - Sport-specific training
   - Plyometric exercises
   - Gradual return to full activity

Complications of Poor Treatment:
- Chronic ankle instability
- Recurrent sprains
- Persistent pain and swelling
- Decreased athletic performance
- Early onset arthritis

Proper rehabilitation is crucial for preventing chronic problems and ensuring full recovery.',
  '/assets/hero-image.jpg'
);

-- Update the get_blog_posts function to include all necessary fields for the frontend
DROP FUNCTION IF EXISTS public.get_blog_posts();
CREATE OR REPLACE FUNCTION public.get_blog_posts()
RETURNS TABLE (
  id uuid,
  title text,
  content text,
  image_url text,
  created_at timestamptz,
  excerpt text,
  author text,
  read_time text,
  category text,
  disease text
) 
LANGUAGE plpgsql 
SECURITY DEFINER
SET search_path = public
AS $$
BEGIN
  RETURN QUERY
  SELECT 
    bp.id,
    bp.title,
    bp.content,
    bp.image_url,
    bp.created_at,
    -- Generate excerpt from content (first 150 characters)
    LEFT(bp.content, 150) || '...' as excerpt,
    'Dr. Smith' as author,
    '5 min read' as read_time,
    CASE 
      WHEN bp.title ILIKE '%knee%' THEN 'Knee Health'
      WHEN bp.title ILIKE '%hip%' THEN 'Hip Health'
      WHEN bp.title ILIKE '%shoulder%' THEN 'Shoulder Health'
      WHEN bp.title ILIKE '%back%' OR bp.title ILIKE '%spine%' THEN 'Spine Health'
      WHEN bp.title ILIKE '%elbow%' THEN 'Elbow Health'
      WHEN bp.title ILIKE '%ankle%' THEN 'Ankle Health'
      ELSE 'General Health'
    END as category,
    CASE 
      WHEN bp.title ILIKE '%arthritis%' THEN 'Arthritis'
      WHEN bp.title ILIKE '%pain%' THEN 'Pain Management'
      WHEN bp.title ILIKE '%sprain%' THEN 'Sprains'
      WHEN bp.title ILIKE '%impingement%' THEN 'Impingement'
      ELSE 'General'
    END as disease
  FROM public.blog_posts bp
  ORDER BY bp.created_at DESC;
END;
$$;